<!DOCTYPE html>
<html>
<title>はじめてのVue.js</title>
<script src="https://unpkg.com/vue@2.5.17"></script>
<form id="app" @submit="checkForm" method="post" novalidate="true">
  <p v-if="errors.length">
    <b>Please correct the following error(s):</b>
    <ul>
      <li v-for="error in errors">{{ error }}</li>
    </ul>
  </p>
  <p>
    Given a budget of 100 dollars, indicate how much
    you would spend on the following features for the
    next generation Star Destroyer. Your total must sum up to 100.
  </p>

  <p>
    <input v-model.number="weapons" type="number" name="weapons">Weapons<br />
    <input v-model.number="shields" type="number" name="shields">Shields<br />
    <input v-model.number="coffee" type="number" name="coffee">Coffee<br />
    <input v-model.number="ac" type="number" name="ac">Air Conditioning<br />
    <input v-model.number="mousedroids" type="number" name="mousedroids">Mouse Droids<br />
  </p>
  <p>
    Current Total: {{ Total }}
  </p>
  <p>
    <input type="submit" value="Submit">
  </p>
</form>

<script>
  const app = new Vue({
    el: '#app',
    data: {
      errors: [],
      weapons: 0,
      shields: 0,
      coffee: 0,
      ac: 0,
      mousedroids: 0
    },
    computed: {
      total: function () {
        // Vueは空の値をstringに変換するので、パースする必要がある
        return Number(this.weapons) + Number(this.shields) + Number(this.coffee) + NUmber(this.ac + this.mousedroids);
      }
    },
    methods: {
      checkForm: function (e) {
        this.errors = [];
        if (this.total !=100) {
          this.errors.push('Total most be 100!');
        }
        if (!this.errors.length) {
          return true;
        }
        e.preventDefault();
      }
    }
  })
</script>
</html>
