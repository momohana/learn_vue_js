<!DOCTYPE html>
<html>
<title>Vue.jsでのバリデーション</title>
<script src="https://unpkg.com/vue@2.5.17"></script>
<form id="app" @submit="checkForm" method="post" novalidate="true">
  <p v-if="errors.length">
    <b>Pless correct the following error(s):</b>
    <ul>
      <li v-for="error in errors">{{ error }}</li>
    </ul>
  </p>
  <p>
    <label for="status">Status</label>
    <select id="status" v-model="status" name="status">
      <option>Processing</option>
      <option>Completed</option>
    </select>
  </p>
  <p>
    <label for="inquiryType">Inquiry type</label>
    <select id="inquiryType" v-model="inquiryType" name="inquiryType">
      <option>Unregestered product</option>
      <option>Technical inquiry</option>
      <option>Product inquiry</option>
      <option>Product claim</option>
      <option>Export check</option>
      <option>Convert</option>
      <option>Check price</option>
    </select>
  </p>
  <p>
    <label for="requestTime">Request time</label>
    <input id="requestTime" v-model="requestTime" type="datetime-local" name="requestTime">
  </p>
  <p>
    <label for="completedTime">Completed time</label>
    <input id="completedTime" v-model="completedTime" type="datetime-local" name="completedTime">
  </p>
  <p>
    <input type="submit" value="submit">
  </p>
</form>
<script>
  const app = new Vue({
    el: '#app',
    data: {
      errors: [],
      status: null,
      inquiryType: null,
      requestTime: null,
      completedTime: null
    },
    methods: {
      checkForm: function (e) {
        if (this.status == 'Completed' && this.inquiryType && this.requestTime && this.completedTime && this.requestTime < this.completedTime) {
          return true;
        }
        this.errors = [];

        if (this.status != 'Completed') {
          this.errors.push('Status is completed.')
        }
        if (!this.inquiryType) {
          this.errors.push('Inquiry type required.')
        }
        if (!this.requestTime) {
          this.errors.push('request time required.')
        }
        if (!this.completedTime) {
          this.errors.push('completed time required.')
        }
        if (this.requestTime > this.completedTime) {
          this.errors.push('time is -.')
        }
        e.preventDefault();
      }
    }
  })
</script>
</html>
